[链接](https://leetcode-cn.com/problems/smallest-k-length-subsequence-with-occurrences-of-a-letter/)
[思路](https://leetcode-cn.com/problems/smallest-k-length-subsequence-with-occurrences-of-a-letter/solution/dan-diao-zhan-si-lu-zhu-bu-fen-xi-zhu-sh-g0zs/)
```c++
class Solution {
public:
    string smallestSubsequence(string s, int k, char letter, int repetition) {
        int n = s.size();
        int cnt = 0; // 后面还未扫描到的letter的数量
        for (auto x : s)
            if (x == letter) cnt ++;
        int toErase = n - k; // 要删去 n - k个元素
        string res; // ans
        int p = 0; // 目前为止letter已扫描的次数
        for (int i = 0; i < n; ++ i) {
            while(toErase && res.size() && s[i] < res.back()){ // 删去逆序的字母
                if(res.back() == letter) {
                    if (repetition > p - 1 + cnt) // 后面的letter 不够凑成repetition 个letter
                        break;
                    p --;
                }
                res.pop_back();
                toErase --;
                
            }
            if (s[i] == letter) p ++, cnt --; // 前面增加，后面减少
            res += s[i];

            if (res.size() + max(0, repetition - p) > k) {
                if (s[i] == letter) p --;
                res.pop_back();
                toErase --;
            }
        }
        return res;
    }
};
```
